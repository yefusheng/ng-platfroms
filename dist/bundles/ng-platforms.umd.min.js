!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@ionic-native/transfer"),require("rxjs"),require("@ionic-native/file-opener"),require("@ionic-native/in-app-browser"),require("@ionic-native/image-picker"),require("@ionic-native/network"),require("@ionic-native/call-number"),require("ionic-angular"),require("@ionic-native/app-version"),require("@ionic-native/camera"),require("rxjs/Observable"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@ionic-native/transfer","rxjs","@ionic-native/file-opener","@ionic-native/in-app-browser","@ionic-native/image-picker","@ionic-native/network","@ionic-native/call-number","ionic-angular","@ionic-native/app-version","@ionic-native/camera","rxjs/Observable","@angular/forms"],e):e((t.ng=t.ng||{},t.ng.platfroms={}),t.ng.core,t._angular_common,t._ionicNative_transfer,t.rxjs,t._ionicNative_fileOpener,t._ionicNative_inAppBrowser,t._ionicNative_imagePicker,t._ionicNative_network,t._ionicNative_callNumber,t.ionicAngular,t._ionicNative_appVersion,t._ionicNative_camera,t.Rx,t._angular_forms)}(this,function(t,e,o,n,r,i,s,a,p,c,u,l,f,h,m){"use strict";function d(t){return"string"==typeof t?t:JSON.stringify(t)}function g(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.log(t,e)}function y(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function v(t){return File&&t instanceof File}var w=function(){return function(){}}(),P=function(){function t(t){this.fileOver=new e.EventEmitter,this.onFileDrop=new e.EventEmitter,this.element=t}return t.prototype.getOptions=function(){return this.uploader.options},t.prototype.getFilters=function(){return{}},t.prototype.onDrop=function(t){var e=this._getTransfer(t);if(e){var o=this.getOptions(),n=this.getFilters();this._preventAndStop(t),this.uploader.addToQueue(e.files,o,n),this.fileOver.emit(!1),this.onFileDrop.emit(e.files)}},t.prototype.onDragOver=function(t){var e=this._getTransfer(t);this._haveFiles(e.types)&&(e.dropEffect="copy",this._preventAndStop(t),this.fileOver.emit(!0))},t.prototype.onDragLeave=function(t){this.element&&t.currentTarget===this.element[0]||(this._preventAndStop(t),this.fileOver.emit(!1))},t.prototype._getTransfer=function(t){return t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer},t.prototype._preventAndStop=function(t){t.preventDefault(),t.stopPropagation()},t.prototype._haveFiles=function(t){return!!t&&(t.indexOf?-1!==t.indexOf("Files"):!!t.contains&&t.contains("Files"))},t}();P.decorators=[{type:e.Directive,args:[{selector:"[ng2FileDrop]"}]}],P.ctorParameters=function(){return[{type:e.ElementRef}]},P.propDecorators={uploader:[{type:e.Input}],fileOver:[{type:e.Output}],onFileDrop:[{type:e.Output}],onDrop:[{type:e.HostListener,args:["drop",["$event"]]}],onDragOver:[{type:e.HostListener,args:["dragover",["$event"]]}],onDragLeave:[{type:e.HostListener,args:["dragleave",["$event"]]}]};var _=function(){function t(t){this.element=t}return t.prototype.getOptions=function(){return this.uploader.options},t.prototype.getFilters=function(){},t.prototype.isEmptyAfterSelection=function(){return!!this.element.nativeElement.attributes.multiple},t.prototype.onChange=function(){var t=this.element.nativeElement.files,e=this.getOptions(),o=this.getFilters();console.log(t[0]),console.log(e),this.uploader.addToQueue(t,e,o),this.isEmptyAfterSelection()&&(this.element.nativeElement.value="")},t}();_.decorators=[{type:e.Directive,args:[{selector:"[ng2FileSelect]"}]}],_.ctorParameters=function(){return[{type:e.ElementRef}]},_.propDecorators={uploader:[{type:e.Input}],onChange:[{type:e.HostListener,args:["change"]}]};var b=function(){return function(){}}();b.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule],declarations:[P,_],exports:[P,_]}]}],b.ctorParameters=function(){return[]};var I=function(){function t(t){this.storage=t}return t.prototype.saveObject=function(t,e){this.storage.saveObject(t,e)},t.prototype.getObject=function(t,e){return this.storage.getObject(t,e)},t}();I.decorators=[{type:e.Injectable}],I.ctorParameters=function(){return[null]};var x=function(){function t(){}return t.prototype.saveObject=function(t,e){window.sessionStorage.setItem(t,d(e))},t.prototype.getObject=function(t,e){var o=window.sessionStorage.getItem(t);return o=o?JSON.parse(o):e},t}();x.decorators=[{type:e.Injectable}],x.ctorParameters=function(){return[]};var C=function(){function t(t){var e=y(t)?t.value:t;this["_createFrom"+("string"==typeof e?"FakePath":"Object")](e)}return t.prototype._createFromFakePath=function(t){this.lastModifiedDate=void 0,this.size=void 0,this.type="like/"+t.slice(t.lastIndexOf(".")+1).toLowerCase(),this.name=t.slice(t.lastIndexOf("/")+t.lastIndexOf("\\")+2)},t.prototype._createFromObject=function(t){this.size=t.size,this.type=t.type,this.name=t.name},t}(),O=function(){function t(t,e,o){this.url="/",this.headers=[],this.withCredentials=!0,this.formData=[],this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.index=void 0,this.uploader=t,this.some=e,this.options=o,this.file=new C(e),this._file=e,t.options&&(this.method=t.options.method||"POST",this.alias=t.options.itemAlias||"file"),this.url=t.options.url}return t.prototype.upload=function(){try{this.uploader.uploadItem(this)}catch(t){this.uploader._onCompleteItem(this,"",0,{}),this.uploader._onErrorItem(this,"",0,{})}},t.prototype.cancel=function(){this.uploader.cancelItem(this)},t.prototype.remove=function(){this.uploader.removeFromQueue(this)},t.prototype.onBeforeUpload=function(){},t.prototype.onBuildForm=function(t){return{form:t}},t.prototype.onProgress=function(t){return{progress:t}},t.prototype.onSuccess=function(t,e,o){return{response:t,status:e,headers:o}},t.prototype.onError=function(t,e,o){return{response:t,status:e,headers:o}},t.prototype.onCancel=function(t,e,o){return{response:t,status:e,headers:o}},t.prototype.onComplete=function(t,e,o){return{response:t,status:e,headers:o}},t.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},t.prototype._onBuildForm=function(t){this.onBuildForm(t)},t.prototype._onProgress=function(t){this.progress=t,this.onProgress(t)},t.prototype._onSuccess=function(t,e,o){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=void 0,this.onSuccess(t,e,o)},t.prototype._onError=function(t,e,o){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=void 0,this.onError(t,e,o)},t.prototype._onCancel=function(t,e,o){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=void 0,this.onCancel(t,e,o)},t.prototype._onComplete=function(t,e,o){this.onComplete(t,e,o),this.uploader.options.removeAfterUpload&&this.remove()},t.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},t}(),A=function(){function t(){}return t.getMimeClass=function(t){var e="application";return-1!==this.mime_psd.indexOf(t.type)?e="image":t.type.match("image.*")?e="image":t.type.match("video.*")?e="video":t.type.match("audio.*")?e="audio":"application/pdf"===t.type?e="pdf":-1!==this.mime_compress.indexOf(t.type)?e="compress":-1!==this.mime_doc.indexOf(t.type)?e="doc":-1!==this.mime_xsl.indexOf(t.type)?e="xls":-1!==this.mime_ppt.indexOf(t.type)&&(e="ppt"),"application"===e&&(e=this.fileTypeDetection(t.name)),e},t.fileTypeDetection=function(t){var e={jpg:"image",jpeg:"image",tif:"image",psd:"image",bmp:"image",png:"image",nef:"image",tiff:"image",cr2:"image",dwg:"image",cdr:"image",ai:"image",indd:"image",pin:"image",cdp:"image",skp:"image",stp:"image","3dm":"image",mp3:"audio",wav:"audio",wma:"audio",mod:"audio",m4a:"audio",compress:"compress",rar:"compress","7z":"compress",lz:"compress",z01:"compress",pdf:"pdf",xls:"xls",xlsx:"xls",ods:"xls",mp4:"video",avi:"video",wmv:"video",mpg:"video",mts:"video",flv:"video","3gp":"video",vob:"video",m4v:"video",mpeg:"video",m2ts:"video",mov:"video",doc:"doc",docx:"doc",eps:"doc",txt:"doc",odt:"doc",rtf:"doc",ppt:"ppt",pptx:"ppt",pps:"ppt",ppsx:"ppt",odp:"ppt"},o=t.split(".");if(o.length<2)return"application";var n=o[o.length-1].toLowerCase();return void 0===e[n]?"application":e[n]},t}();A.mime_doc=["application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],A.mime_xsl=["application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],A.mime_ppt=["application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],A.mime_psd=["image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd"],A.mime_compress=["application/x-gtar","application/x-gcompress","application/compress","application/x-tar","application/x-rar-compressed","application/octet-stream"];var F=function(){function t(t){this.isUploading=!1,this.queue=[],this.progress=0,this._nextIndex=0,this.options={autoUpload:!1,isHTML5:!0,filters:[],removeAfterUpload:!1,disableMultipart:!1},this.setOptions(t)}return t.prototype.setOptions=function(t){this.options=Object.assign(this.options,t),this.authToken=t.authToken,this.authTokenHeader=t.authTokenHeader||"Authorization",this.autoUpload=t.autoUpload,this.options.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.options.maxFileSize&&this.options.filters.unshift({name:"fileSize",fn:this._fileSizeFilter}),this.options.allowedFileType&&this.options.filters.unshift({name:"fileType",fn:this._fileTypeFilter}),this.options.allowedMimeType&&this.options.filters.unshift({name:"mimeType",fn:this._mimeTypeFilter});for(var e=0;e<this.queue.length;e++)this.queue[e].url=this.options.url},t.prototype.addToQueue=function(t,e,o){for(var n=this,r=[],i=0,s=t;i<s.length;i++){var a=s[i];r.push(a)}var p=this._getFilters(o),c=this.queue.length,u=[];r.map(function(t){e||(e=n.options);var o=new C(t);if(n._isValidFile(o,p,e)){var r=new O(n,t,e);u.push(r),n.queue.push(r),n._onAfterAddingFile(r)}else{var i=p[n._failFilterIndex];n._onWhenAddingFileFailed(o,i,e)}}),this.queue.length!==c&&(this._onAfterAddingAll(u),this.progress=this._getTotalProgress()),this._render(),this.options.autoUpload&&this.uploadAll()},t.prototype.removeFromQueue=function(t){var e=this.getIndexOfItem(t),o=this.queue[e];o.isUploading&&o.cancel(),this.queue.splice(e,1),this.progress=this._getTotalProgress()},t.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},t.prototype.uploadItem=function(t){var e=this.getIndexOfItem(t),o=this.queue[e],n=this.options.isHTML5?"_xhrTransport":"_iframeTransport";o._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[n](o))},t.prototype.cancelItem=function(t){var e=this.getIndexOfItem(t),o=this.queue[e],n=this.options.isHTML5?o._xhr:o._form;o&&o.isUploading&&n.abort()},t.prototype.uploadAll=function(){var t=this.getNotUploadedItems().filter(function(t){return!t.isUploading});t.length&&(t.map(function(t){return t._prepareToUploading()}),t[0].upload())},t.prototype.cancelAll=function(){this.getNotUploadedItems().map(function(t){return t.cancel()})},t.prototype.isFile=function(t){return v(t)},t.prototype.isFileLikeObject=function(t){return t instanceof C},t.prototype.getIndexOfItem=function(t){return"number"==typeof t?t:this.queue.indexOf(t)},t.prototype.getNotUploadedItems=function(){return this.queue.filter(function(t){return!t.isUploaded})},t.prototype.getReadyItems=function(){return this.queue.filter(function(t){return t.isReady&&!t.isUploading}).sort(function(t,e){return t.index-e.index})},t.prototype.destroy=function(){},t.prototype.onAfterAddingAll=function(t){return{fileItems:t}},t.prototype.onBuildItemForm=function(t,e){return{fileItem:t,form:e}},t.prototype.onAfterAddingFile=function(t){return{fileItem:t}},t.prototype.onWhenAddingFileFailed=function(t,e,o){return{item:t,filter:e,options:o}},t.prototype.onBeforeUploadItem=function(t){return{fileItem:t}},t.prototype.onProgressItem=function(t,e){return{fileItem:t,progress:e}},t.prototype.onProgressAll=function(t){return{progress:t}},t.prototype.onSuccessItem=function(t,e,o,n){return{item:t,response:e,status:o,headers:n}},t.prototype.onErrorItem=function(t,e,o,n){return{item:t,response:e,status:o,headers:n}},t.prototype.onCancelItem=function(t,e,o,n){return{item:t,response:e,status:o,headers:n}},t.prototype.onCompleteItem=function(t,e,o,n){return{item:t,response:e,status:o,headers:n}},t.prototype.onCompleteAll=function(){},t.prototype._mimeTypeFilter=function(t){return!(this.options.allowedMimeType&&-1===this.options.allowedMimeType.indexOf(t.type))},t.prototype._fileSizeFilter=function(t){return!(this.options.maxFileSize&&t.size>this.options.maxFileSize)},t.prototype._fileTypeFilter=function(t){return!(this.options.allowedFileType&&-1===this.options.allowedFileType.indexOf(A.getMimeClass(t)))},t.prototype._onErrorItem=function(t,e,o,n){t._onError(e,o,n),this.onErrorItem(t,e,o,n)},t.prototype._onCompleteItem=function(t,e,o,n){t._onComplete(e,o,n),this.onCompleteItem(t,e,o,n);var r=this.getReadyItems()[0];this.isUploading=!1,r?r.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())},t.prototype._headersGetter=function(t){return function(e){return e?t[e.toLowerCase()]||void 0:t}},t.prototype._xhrTransport=function(t){var e,o=this,n=t._xhr=new XMLHttpRequest;if(this._onBeforeUploadItem(t),"number"!=typeof t._file.size)throw new TypeError("The file specified is no longer valid");if(this.options.disableMultipart?e=t._file:(e=new FormData,this._onBuildItemForm(t,e),e.append(t.alias,t._file,t.file.name),void 0!==this.options.additionalParameter&&Object.keys(this.options.additionalParameter).forEach(function(t){e.append(t,o.options.additionalParameter[t])})),n.upload.onprogress=function(e){var n=Math.round(e.lengthComputable?100*e.loaded/e.total:0);o._onProgressItem(t,n)},n.onload=function(){var e=o._parseHeaders(n.getAllResponseHeaders()),r=o._transformResponse(n.response,e),i=o._isSuccessCode(n.status)?"Success":"Error";o["_on"+i+"Item"](t,r,n.status,e),o._onCompleteItem(t,r,n.status,e)},n.onerror=function(){var e=o._parseHeaders(n.getAllResponseHeaders()),r=o._transformResponse(n.response,e);o._onErrorItem(t,r,n.status,e),o._onCompleteItem(t,r,n.status,e)},n.onabort=function(){var e=o._parseHeaders(n.getAllResponseHeaders()),r=o._transformResponse(n.response,e);o._onCancelItem(t,r,n.status,e),o._onCompleteItem(t,r,n.status,e)},n.open(t.method,t.url,!0),n.withCredentials=t.withCredentials,this.options.headers)for(var r=0,i=this.options.headers;r<i.length;r++){p=i[r];n.setRequestHeader(p.name,p.value)}if(t.headers.length)for(var s=0,a=t.headers;s<a.length;s++){var p=a[s];n.setRequestHeader(p.name,p.value)}this.authToken&&n.setRequestHeader(this.authTokenHeader,this.authToken),n.send(e),this._render()},t.prototype._getTotalProgress=function(t){if(void 0===t&&(t=0),this.options.removeAfterUpload)return t;var e=this.getNotUploadedItems().length,o=e?this.queue.length-e:this.queue.length,n=100/this.queue.length,r=t*n/100;return Math.round(o*n+r)},t.prototype._getFilters=function(t){if(!t)return this.options.filters;if(Array.isArray(t))return t;if("string"==typeof t){var e=t.match(/[^\s,]+/g);return this.options.filters.filter(function(t){return-1!==e.indexOf(t.name)})}return this.options.filters},t.prototype._render=function(){},t.prototype._queueLimitFilter=function(){return void 0===this.options.queueLimit||this.queue.length<this.options.queueLimit},t.prototype._isValidFile=function(t,e,o){var n=this;return this._failFilterIndex=-1,!e.length||e.every(function(e){return n._failFilterIndex++,e.fn.call(n,t,o)})},t.prototype._isSuccessCode=function(t){return t>=200&&t<300||304===t},t.prototype._transformResponse=function(t,e){return t},t.prototype._parseHeaders=function(t){var e,o,n,r={};return t?(t.split("\n").map(function(t){n=t.indexOf(":"),e=t.slice(0,n).trim().toLowerCase(),o=t.slice(n+1).trim(),e&&(r[e]=r[e]?r[e]+", "+o:o)}),r):r},t.prototype._onWhenAddingFileFailed=function(t,e,o){this.onWhenAddingFileFailed(t,e,o)},t.prototype._onAfterAddingFile=function(t){this.onAfterAddingFile(t)},t.prototype._onAfterAddingAll=function(t){this.onAfterAddingAll(t)},t.prototype._onBeforeUploadItem=function(t){t._onBeforeUpload(),this.onBeforeUploadItem(t)},t.prototype._onBuildItemForm=function(t,e){t._onBuildForm(e),this.onBuildItemForm(t,e)},t.prototype._onProgressItem=function(t,e){var o=this._getTotalProgress(e);this.progress=o,t._onProgress(e),this.onProgressItem(t,e),this.onProgressAll(o),this._render()},t.prototype._onSuccessItem=function(t,e,o,n){t._onSuccess(e,o,n),this.onSuccessItem(t,e,o,n)},t.prototype._onCancelItem=function(t,e,o,n){t._onCancel(e,o,n),this.onCancelItem(t,e,o,n)},t}(),S=function(){function t(){this.token=""}return t.prototype.setToken=function(t){this.token=t},t.prototype.getToken=function(){return this.token},t}(),T=function(){function t(t){this.authService=t,this.headersList=new Array}return t.prototype.upload=function(t,e,o){var n=this;this.fileUploaderOptions={url:e,authTokenHeader:this.authService.getToken(),autoUpload:!0},this.uploader||(this.uploader=new F(this.fileUploaderOptions)),this.uploader.setOptions(this.fileUploaderOptions),g("initFileUploader token",this.authService.getToken());var r=t;return new Promise(function(t,e){n.uploader.onSuccessItem=function(e,o,n,r){o&&t({response:o||""})},n.uploader.onErrorItem=function(t,o,n,r){o&&e({response:o||""})},n.uploader.addToQueue(r,n.fileUploaderOptions),n.uploader.uploadAll()})},t.prototype.chooseFile=function(t){throw new Error("Method not implemented.")},t.prototype.download=function(t,e,o){throw new Error("Method not implemented.")},t}();T.decorators=[{type:e.Injectable}],T.ctorParameters=function(){return[{type:S}]};var U=function(){function t(){}return t.prototype.log=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.log(t,e)},t.prototype.error=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.error(t,e)},t}();U.decorators=[{type:e.Injectable}],U.ctorParameters=function(){return[]};var N=function(){function t(t,e){this.enable=t,this.logger=e}return t.prototype.log=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.enable&&this.logger.log(t,e)},t.prototype.error=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.logger.error(t,e)},t}();N.decorators=[{type:e.Injectable}],N.ctorParameters=function(){return[null,null]};var j=function(){function t(t){this.transFile=t}return t.prototype.upload=function(t,e,o){return this.transFile.upload(t,e,o)},t.prototype.chooseFile=function(t){return this.transFile.chooseFile(t)},t.prototype.download=function(t,e,o){throw new Error("Method not implemented.")},t}();j.decorators=[{type:e.Injectable}],j.ctorParameters=function(){return[null]};var E=[{provide:I,useClass:x},{provide:j,useClass:T},{provide:N,useClass:U}],L=function(){return function(){}}();L.decorators=[{type:e.NgModule,args:[{imports:[b],exports:[b],providers:[E]}]}],L.ctorParameters=function(){return[]};var k=function(){function t(){}return t.prototype.saveObject=function(t,e){localStorage.setItem(t,d(e))},t.prototype.getObject=function(t,e){var o=localStorage.getItem(t);return o=o?JSON.parse(o):e},t}();k.decorators=[{type:e.Injectable}],k.ctorParameters=function(){return[]};var M=function(){function t(){}return t.prototype.log=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.log(t,e)},t.prototype.error=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o]},t}();M.decorators=[{type:e.Injectable}],M.ctorParameters=function(){return[]};var R=function(){function t(){this.fileTransfer=(new n.Transfer).create()}return t.prototype.uploadPicture=function(t,e){return this.upload(t,e)},t.prototype.upload=function(t,e){var o={fileKey:"file",fileName:t.substr(t.lastIndexOf("/")+1)};return r.Observable.fromPromise(this.fileTransfer.upload(t,e,o)).map(function(t){return null.response=t.response,g("exeFileUploadResult"+t),null}).toPromise()},t.prototype.chooseFile=function(t){throw new Error("Method not implemented.")},t.prototype.download=function(t,e,o){throw new Error("Method not implemented.")},t}();R.decorators=[{type:e.Injectable}],R.ctorParameters=function(){return[]};var q=function(){function t(t,e,o,n,r,i,s,a,p,c,u){this.platform=t,this.alertCtrl=e,this.appVersion=o,this.camera=n,this.transfer=r,this.fileOpener=i,this.inAppBrowser=s,this.imagePicker=a,this.network=p,this.callNumber=c,this.loadingCtrl=u,this.loadingIsOpen=!1}return t.prototype.warn=function(t){console.log("%cNativeService/"+t,"color:#e8c406")},t.prototype.openUrlByBrowser=function(t){this.inAppBrowser.create(t,"_system")},t.prototype.downloadApk=function(){},t.prototype.isMobile=function(){return this.platform.is("mobile")&&!this.platform.is("mobileweb")},t.prototype.isAndroid=function(){return this.isMobile()&&this.platform.is("android")},t.prototype.isIos=function(){return this.isMobile()&&(this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))},t.prototype.showLoading=function(t){var e=this;void 0===t&&(t=""),this.loadingIsOpen||(this.loadingIsOpen=!0,this.loading=this.loadingCtrl.create({content:t}),this.loading.present(),setTimeout(function(){e.loadingIsOpen&&e.loading.dismiss(),e.loadingIsOpen=!1},1e4))},t.prototype.hideLoading=function(){this.loadingIsOpen&&this.loading.dismiss(),this.loadingIsOpen=!1},t.prototype.getPicture=function(t){var e=this;void 0===t&&(t={});var o=Object.assign({sourceType:this.camera.PictureSourceType.CAMERA,destinationType:this.camera.DestinationType.DATA_URL,quality:100,allowEdit:!0,encodingType:this.camera.EncodingType.JPEG,targetWidth:800,targetHeight:800,saveToPhotoAlbum:!0,correctOrientation:!0},t);return new Promise(function(t){e.camera.getPicture(o).then(function(e){t(e)},function(t){e.warn("getPicture:"+t)})})},t.prototype.getPictureByCamera=function(t){var e=this;return void 0===t&&(t={}),new Promise(function(o){e.getPicture(Object.assign({sourceType:e.camera.PictureSourceType.CAMERA},t)).then(function(t){o(t)}).catch(function(t){})})},t.prototype.getPictureByPhotoLibrary=function(t){var e=this;return void 0===t&&(t={}),new Promise(function(o){e.getPicture(Object.assign({sourceType:e.camera.PictureSourceType.PHOTOLIBRARY},t)).then(function(t){o(t)}).catch(function(t){})})},t.prototype.getMultiplePicture=function(t){var e=this;void 0===t&&(t={});var o=this,n=t.destinationType||0;return new Promise(function(r){e.imagePicker.getPictures(Object.assign({maximumImagesCount:6,width:800,height:800,quality:100},t)).then(function(t){if(1===n)r(t);else for(var e=[],i=0,s=t;i<s.length;i++){var a=s[i];o.convertImgToBase64(a,function(o){e.push(o),e.length===t.length&&r(e)},null)}}).catch(function(t){e.warn("getMultiplePicture:"+t)})})},t.prototype.convertImgToBase64=function(t,e,o){void 0===o&&(o="image/png");var n=document.createElement("CANVAS"),r=n.getContext("2d"),i=new Image;i.crossOrigin="Anonymous",i.onload=function(){n.height=i.height,n.width=i.width,r.drawImage(i,0,0);var t=n.toDataURL(o),s=t.substring(t.indexOf(";base64,")+8);e.call(this,s),n=null},i.src=t},t.prototype.getUserLocation=function(){var t=this;return new Promise(function(e){t.isMobile()?LocationPlugin.getLocation(function(t){e({lng:t.longitude,lat:t.latitude})},function(e){alert(-1==e.indexOf("缺少定位权限")?"错误消息："+e:"缺少定位权限，请在手机设置中开启"),t.warn("getUserLocation:"+e)}):(t.warn("getUserLocation:非手机环境,即测试环境返回固定坐标"),e({lng:113.350912,lat:23.119495}))})},t.prototype.getVersionNumber=function(){var t=this;return new Promise(function(e){t.appVersion.getVersionNumber().then(function(t){e(t)}).catch(function(e){t.warn("getVersionNumber:"+e)})})},t.prototype.getAppName=function(){var t=this;return new Promise(function(e){t.appVersion.getAppName().then(function(t){e(t)}).catch(function(e){t.warn("getAppName:"+e)})})},t.prototype.getPackageName=function(){var t=this;return new Promise(function(e){t.appVersion.getPackageName().then(function(t){e(t)}).catch(function(e){t.warn("getPackageName:"+e)})})},t.prototype.getNetworkType=function(){return this.isMobile()?this.network.type:"wifi"},t.prototype.isConnecting=function(){return"none"!=this.getNetworkType()},t.prototype.call=function(t){this.callNumber.callNumber(t,!0).then(function(){}).catch(function(){})},t.prototype.sendSms=function(t){this.callNumber.callNumber(t,!0).then(function(){}).catch(function(){})},t}();q.decorators=[{type:e.Injectable}],q.ctorParameters=function(){return[{type:u.Platform},{type:u.AlertController},{type:l.AppVersion},{type:f.Camera},{type:n.Transfer},{type:i.FileOpener},{type:s.InAppBrowser},{type:a.ImagePicker},{type:p.Network},{type:c.CallNumber},{type:u.LoadingController}]};var B=[{provide:I,useClass:k},{provide:j,useClass:R},{provide:N,useClass:M}],D=function(){return function(){}}();D.decorators=[{type:e.NgModule,args:[{providers:[B,R,l.AppVersion,i.FileOpener,n.Transfer,s.InAppBrowser,a.ImagePicker,p.Network,c.CallNumber,q,f.Camera]}]}],D.ctorParameters=function(){return[]};var V=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return V(e,t),e.prototype.initPlatform=function(){this.wx=window.wx;var t=this._getWxOption("exe");this._wxInit(t)},e.prototype.getPlatformContext=function(){return this.wx},e.prototype.getPlatformName=function(){return nt},e.prototype.getPlatformCode=function(){return Z.wechat},e.prototype._getWxOption=function(t){return{jsApiList:["checkJsApi","scanQRCode","getLocation","getLocation","chooseImage","uploadImage","downloadImage"],configUrl:this._getWxConfigUrl(t)}},e.prototype._getWxConfigUrl=function(t){return"http://weixin.exexm.com/auth/"+t+"/config"},e.prototype._wxInit=function(t){var e=this;t||t.jsApiList.length;var o=t.configUrl,n=t.jsApiList;if(void 0!==this.wx)var r=h.Observable.ajax({url:o,body:{url:location.href.split("#")[0]},method:"post",crossDomain:!0});r.subscribe(function(o){var r=o.response;console.log(o),r&&(r.success&&e.wx.config({debug:t&&t.debug||!0,appId:r.result&&r.result.appId,timestamp:r.result&&r.result.timestamp,nonceStr:r.result&&r.result.nonceStr,signature:r.result&&r.result.signature,jsApiList:n}),e.wx.chooseImage({count:1}))})},e}(w);H.decorators=[{type:e.Injectable}],H.ctorParameters=function(){return[]};var W=function(){function t(t){this.wechatPlatform=t}return t.prototype.saveObject=function(t,e){try{this.wechatPlatform.getPlatformContext().setStorageSync(t,e)}catch(t){}},t.prototype.getObject=function(t,e){try{this.wechatPlatform.getPlatformContext().getStorageSync(t,e)}catch(t){}},t}();W.decorators=[{type:e.Injectable}],W.ctorParameters=function(){return[{type:H}]};var z=function(){function t(t){this.wechatPlatform=t}return t.prototype.upload=function(t,e,o){return new Promise(function(e,o){this.wechatPlatform.getPlatformContext().uploadImage({localId:t,isShowProcess:1,success:function(t){e(t)},fail:function(t){o(t)}})})},t.prototype.chooseFile=function(t){return new Promise(function(t,e){this.wechatPlatform.getPlatformContext().chooseImage({count:1,success:function(e){t(e)},fail:function(t){e(t)}})})},t.prototype.download=function(t,e,o){throw new Error("Method not implemented.")},t}();z.decorators=[{type:e.Injectable}],z.ctorParameters=function(){return[{type:H}]};var J=[{provide:I,useClass:W},{provide:j,useClass:z},{provide:N,useClass:U}],Q=function(){return function(){}}();Q.decorators=[{type:e.NgModule,args:[{providers:[H,J]}]}],Q.ctorParameters=function(){return[]};var G=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return G(e,t),e.prototype.initPlatform=function(){this.window=window},e.prototype.getPlatformContext=function(){return this.window},e.prototype.getPlatformName=function(){return et},e.prototype.getPlatformCode=function(){return Z.windows},e}(w),K=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Y=function(t){function e(e){var o=t.call(this)||this;return o.platform=e,o}return K(e,t),e.prototype.initPlatform=function(){},e.prototype.getPlatformContext=function(){return this.platform},e.prototype.getPlatformName=function(){return ot},e.prototype.getPlatformCode=function(){return Z.mobile},e}(w),X=function(){function t(){this.initPlatform()}return t.prototype.initPlatform=function(){switch(this.getPlatformCode()){case Z.windows:this.platform=new $;break;case Z.wechat:this.platform=new H;break;case Z.mobile:default:this.platform=new Y(new u.Platform)}},t.prototype.getPlatformContext=function(){return this.platform.getPlatformContext()},t.prototype.getPlatformName=function(){return this.platform.getPlatformName()},t.prototype.getStragety=function(){return this._userAgent=navigator.userAgent.toLowerCase(),this.isWechat()?Q:this.isNative()?D:(this.isWindow(),L)},t.prototype.getPlatformCode=function(){return this._userAgent=navigator.userAgent.toLowerCase(),this.isWechat()?Z.wechat:this.isNative()?Z.mobile:(this.isWindow(),Z.windows)},t.prototype.isNative=function(){for(var t=["android","iphone","ipad","ipod"],e=0;e<t.length;e++)if(this.isPlatform(t[e]))return!0;return!1},t.prototype.isWindow=function(){return this.isPlatform("windows")},t.prototype.isWechat=function(){return this.isPlatform("micromessenger")},t.prototype.isPlatform=function(t){return this._userAgent.indexOf(t)>-1},t}();X.decorators=[{type:e.Injectable}],X.ctorParameters=function(){return[]};var Z,tt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),et="windows",ot="mobile",nt="wechat";!function(t){t[t.mobile=0]="mobile",t[t.windows=1]="windows",t[t.wechat=2]="wechat"}(Z||(Z={}));var rt=function(t){function e(){var e=t.call(this)||this;return e.platform=new X,e}return tt(e,t),e.prototype.initPlatform=function(){},e.prototype.getPlatformCode=function(){return this.platform.getPlatformCode()},e.prototype.getPlatformContext=function(){return this.platform.getPlatformContext()},e.prototype.getPlatformName=function(){return this.platform.getPlatformName()},e}(w);rt.decorators=[{type:e.Injectable}],rt.ctorParameters=function(){return[]};var it=function(){return function(t,e){this.component=t,this.data=e}}(),st=function(){function t(t,e){this._platform=t,this.transFileService=e,this.imageUrl="",this.enableUpload=!0}return t.prototype.ngOnChanges=function(t){},t.prototype.ngOnInit=function(){},t.prototype.onSelect=function(t){this.openMenu()},t.prototype.openMenu=function(){this.transFileService.chooseFile().then(function(t){}).catch(function(t){alert("error"+t.code+"--"+t.body)})},t.prototype.getPicture=function(t){},t.prototype.getPictureSuccess=function(t){this.imageBase64=t,this.avatarPath="data:image/jpeg;base64,"+t,this.saveAvatar()},t.prototype.saveAvatar=function(){},t}();st.decorators=[{type:e.Component,args:[{selector:"exe-upload-file-native",templateUrl:"UploadFileWechat.html"}]}],st.ctorParameters=function(){return[{type:u.Platform},{type:j}]},st.propDecorators={avatarSrc:[{type:e.Input}],hasRound:[{type:e.Input}],serverUrl:[{type:e.Input}],imageUrl:[{type:e.Input}]};var at=function(){function t(t,e,o,n){this._platform=t,this.nativeService=e,this.actionsheetCtrl=o,this.fileService=n,this.imageUrl="",this.enableUpload=!0}return t.prototype.ngOnChanges=function(t){},t.prototype.ngOnInit=function(){},t.prototype.onSelect=function(t){this.openMenu()},t.prototype.openMenu=function(){var t=this;this.enableUpload&&this.actionsheetCtrl.create({title:"选择照片",cssClass:"action-sheets-basic-page",buttons:[{text:"拍照",icon:this._platform.is("ios")?null:"camera",handler:function(){t.getPicture(1)}},{text:"相册",icon:this._platform.is("ios")?null:"albums",handler:function(){t.getPicture(0)}}]}).present()},t.prototype.getPicture=function(t){var e=this,o={targetWidth:400,targetHeight:400};1==t?this.nativeService.getPictureByCamera(o).then(function(t){e.getPictureSuccess(t)}):this.nativeService.getPictureByPhotoLibrary(o).then(function(t){e.getPictureSuccess(t)})},t.prototype.getPictureSuccess=function(t){this.imageBase64=t,this.avatarPath="data:image/jpeg;base64,"+t,this.saveAvatar()},t.prototype.saveAvatar=function(){this.fileService.upload(this.avatarPath,"").then(function(t){var e;200==(e=JSON.parse(t.response)).code?"data"in e?e.data:alert("error3"+e):alert("error1"+t.response)},function(t){alert("error"+t.code+"--"+t.body)})},t}();at.decorators=[{type:e.Component,args:[{selector:"exe-upload-file-native",templateUrl:"UploadFileNative.html"}]}],at.ctorParameters=function(){return[{type:u.Platform},{type:q},{type:u.ActionSheetController},{type:j}]},at.propDecorators={avatarSrc:[{type:e.Input}],hasRound:[{type:e.Input}],serverUrl:[{type:e.Input}],imageUrl:[{type:e.Input}]};var pt={provide:m.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return ct}),multi:!0},ct=function(){function t(t,e){this.transFileService=e,this._registerOnChange=function(t){},this.element=t}return t.prototype.ngOnChanges=function(t){},t.prototype.ngOnInit=function(){},t.prototype.writeValue=function(t){this._imageUrl=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){},t.prototype.registerOnChange=function(t){this._registerOnChange=t},t.prototype.getFilters=function(){},t.prototype.isEmptyAfterSelection=function(){return!!this.inputFile.nativeElement.attributes.multiple},t.prototype.onChange=function(){var t=this,e=this.inputFile.nativeElement.files;g("files",e),this.transFileService.upload(e,this.serverUrl).then(function(e){var o=JSON.parse(e.response);if(o){var n=o.data;g("_onSuccessItem",e.response),t.isFail=!1,t._registerOnChange(n.picture),t._imageUrl=n.picture}}),console.log(e[0]),this.isEmptyAfterSelection()&&(this.inputFile.nativeElement.value="")},t}();ct.decorators=[{type:e.Component,args:[{selector:"exe-upload-file-pc",templateUrl:"UploadFilePc.html",providers:[pt]}]}],ct.ctorParameters=function(){return[{type:e.ElementRef},{type:j}]},ct.propDecorators={avatarSrc:[{type:e.Input}],hasRound:[{type:e.Input}],serverUrl:[{type:e.Input}],inputFile:[{type:e.ViewChild,args:["inputFile"]}],onChange:[{type:e.HostListener,args:["change"]}]};var ut=function(){function t(t){this.platformService=t}return t.prototype.getUploadComponent=function(){var t=[new it(at,{name:"exeUploadFileNativeComponent"}),new it(ct,{name:"exeUploadFilePcComponent"}),new it(st,{name:"exeUploadFileWechatComponent"})];return g("platform--"+this.platformService.getPlatformCode()),t[this.platformService.getPlatformCode()].component},t}();ut.decorators=[{type:e.Injectable}],ut.ctorParameters=function(){return[{type:rt}]};var lt=function(){function t(t,e){this._componentFactoryResolver=t,this.componentsService=e}return t.prototype.ngAfterViewInit=function(){this.loadComponent()},t.prototype.ngOnDestroy=function(){},t.prototype.loadComponent=function(){var t=this._componentFactoryResolver.resolveComponentFactory(this.componentsService.getUploadComponent());this.uploadFile.createComponent(t).instance.serverUrl=this.serverUrl},t}();lt.decorators=[{type:e.Component,args:[{selector:"exe-upload-file",template:'\n              <div  class="upload-pic">\n                <ng-template #uploadfile> </ng-template>\n              </div>\n            '}]}],lt.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:ut}]},lt.propDecorators={avatarSrc:[{type:e.Input}],hasRound:[{type:e.Input}],serverUrl:[{type:e.Input}],imageUrl:[{type:e.Input}],uploadFile:[{type:e.ViewChild,args:["uploadfile",{read:e.ViewContainerRef}]}]};var ft=function(){return function(){}}();ft.decorators=[{type:e.NgModule,args:[{exports:[lt],declarations:[lt,ct,st,at],entryComponents:[lt,ct,st,at],providers:[{provide:ut,useFactory:function(t){return new ut(t)},deps:[rt]}]}]}],ft.ctorParameters=function(){return[]};var ht=function(){return function(){}}();ht.decorators=[{type:e.NgModule,args:[{imports:[L,ft],exports:[ft],providers:[S,rt]}]}],ht.ctorParameters=function(){return[]};var mt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.initPlatform=function(){this.wx=window.wx;var t=this._getWxOption("exe");this._wxInit(t)},e.prototype.getPlatformContext=function(){return this.wx},e.prototype.getPlatformName=function(){return nt},e.prototype.getPlatformCode=function(){return Z.wechat},e.prototype._getWxOption=function(t){return{jsApiList:["checkJsApi","scanQRCode","getLocation","getLocation","chooseImage","uploadImage","downloadImage"],configUrl:this._getWxConfigUrl(t)}},e.prototype._getWxConfigUrl=function(t){return"http://weixin.exexm.com/auth/"+t+"/config"},e.prototype._wxInit=function(t){var e=this;t||t.jsApiList.length;var o=t.configUrl,n=t.jsApiList;if(void 0!==this.wx)var r=h.Observable.ajax({url:o,body:{url:location.href.split("#")[0]},method:"post",crossDomain:!0});r.subscribe(function(o){var r=o.response;console.log(o),r&&(r.success&&e.wx.config({debug:t&&t.debug||!0,appId:r.result&&r.result.appId,timestamp:r.result&&r.result.timestamp,nonceStr:r.result&&r.result.nonceStr,signature:r.result&&r.result.signature,jsApiList:n}),e.wx.chooseImage({count:1}))})},e}(w);dt.decorators=[{type:e.Injectable}],dt.ctorParameters=function(){return[]};var gt=function(){function t(t){this.wechatPlatform=t}return t.prototype.saveObject=function(t,e){try{this.wechatPlatform.getPlatformContext().setStorageSync(t,e)}catch(t){}},t.prototype.getObject=function(t,e){try{this.wechatPlatform.getPlatformContext().getStorageSync(t,e)}catch(t){}},t}();gt.decorators=[{type:e.Injectable}],gt.ctorParameters=function(){return[{type:dt}]};var yt=function(){function t(t){this.wechatPlatform=t}return t.prototype.upload=function(t,e,o){return new Promise(function(e,o){this.wechatPlatform.getPlatformContext().uploadImage({localId:t,isShowProcess:1,success:function(t){e(t)},fail:function(t){o(t)}})})},t.prototype.chooseFile=function(t){return new Promise(function(t,e){this.wechatPlatform.getPlatformContext().chooseImage({count:1,success:function(e){t(e)},fail:function(t){e(t)}})})},t.prototype.download=function(t,e,o){throw new Error("Method not implemented.")},t}();yt.decorators=[{type:e.Injectable}],yt.ctorParameters=function(){return[{type:dt}]};var vt=function(){function t(){}return t.prototype.log=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.log(t,e)},t.prototype.error=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.error(t,e)},t}();vt.decorators=[{type:e.Injectable}],vt.ctorParameters=function(){return[]};var wt=[{provide:I,useClass:gt},{provide:j,useClass:yt},{provide:N,useClass:vt}],Pt=function(){return function(){}}();Pt.decorators=[{type:e.NgModule,args:[{providers:[dt,wt]}]}],Pt.ctorParameters=function(){return[]};var _t=function(){function t(){}return t.prototype.saveObject=function(t,e){localStorage.setItem(t,d(e))},t.prototype.getObject=function(t,e){var o=localStorage.getItem(t);return o=o?JSON.parse(o):e},t}();_t.decorators=[{type:e.Injectable}],_t.ctorParameters=function(){return[]};var bt=function(){function t(){}return t.prototype.log=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.log(t,e)},t.prototype.error=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o]},t}();bt.decorators=[{type:e.Injectable}],bt.ctorParameters=function(){return[]};var It=function(){function t(){this.fileTransfer=(new n.Transfer).create()}return t.prototype.uploadPicture=function(t,e){return this.upload(t,e)},t.prototype.upload=function(t,e){var o={fileKey:"file",fileName:t.substr(t.lastIndexOf("/")+1)};return r.Observable.fromPromise(this.fileTransfer.upload(t,e,o)).map(function(t){return null.response=t.response,g("exeFileUploadResult"+t),null}).toPromise()},t.prototype.chooseFile=function(t){throw new Error("Method not implemented.")},t.prototype.download=function(t,e,o){throw new Error("Method not implemented.")},t}();It.decorators=[{type:e.Injectable}],It.ctorParameters=function(){return[]};var xt=function(){function t(t,e,o,n,r,i,s,a,p,c,u){this.platform=t,this.alertCtrl=e,this.appVersion=o,this.camera=n,this.transfer=r,this.fileOpener=i,this.inAppBrowser=s,this.imagePicker=a,this.network=p,this.callNumber=c,this.loadingCtrl=u,this.loadingIsOpen=!1}return t.prototype.warn=function(t){console.log("%cNativeService/"+t,"color:#e8c406")},t.prototype.openUrlByBrowser=function(t){this.inAppBrowser.create(t,"_system")},t.prototype.downloadApk=function(){},t.prototype.isMobile=function(){return this.platform.is("mobile")&&!this.platform.is("mobileweb")},t.prototype.isAndroid=function(){return this.isMobile()&&this.platform.is("android")},t.prototype.isIos=function(){return this.isMobile()&&(this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))},t.prototype.showLoading=function(t){var e=this;void 0===t&&(t=""),this.loadingIsOpen||(this.loadingIsOpen=!0,this.loading=this.loadingCtrl.create({content:t}),this.loading.present(),setTimeout(function(){e.loadingIsOpen&&e.loading.dismiss(),e.loadingIsOpen=!1},1e4))},t.prototype.hideLoading=function(){this.loadingIsOpen&&this.loading.dismiss(),this.loadingIsOpen=!1},t.prototype.getPicture=function(t){var e=this;void 0===t&&(t={});var o=Object.assign({sourceType:this.camera.PictureSourceType.CAMERA,destinationType:this.camera.DestinationType.DATA_URL,quality:100,allowEdit:!0,encodingType:this.camera.EncodingType.JPEG,targetWidth:800,targetHeight:800,saveToPhotoAlbum:!0,correctOrientation:!0},t);return new Promise(function(t){e.camera.getPicture(o).then(function(e){t(e)},function(t){e.warn("getPicture:"+t)})})},t.prototype.getPictureByCamera=function(t){var e=this;return void 0===t&&(t={}),new Promise(function(o){e.getPicture(Object.assign({sourceType:e.camera.PictureSourceType.CAMERA},t)).then(function(t){o(t)}).catch(function(t){})})},t.prototype.getPictureByPhotoLibrary=function(t){var e=this;return void 0===t&&(t={}),new Promise(function(o){e.getPicture(Object.assign({sourceType:e.camera.PictureSourceType.PHOTOLIBRARY},t)).then(function(t){o(t)}).catch(function(t){})})},t.prototype.getMultiplePicture=function(t){var e=this;void 0===t&&(t={});var o=this,n=t.destinationType||0;return new Promise(function(r){e.imagePicker.getPictures(Object.assign({maximumImagesCount:6,width:800,height:800,quality:100},t)).then(function(t){if(1===n)r(t);else for(var e=[],i=0,s=t;i<s.length;i++){var a=s[i];o.convertImgToBase64(a,function(o){e.push(o),e.length===t.length&&r(e)},null)}}).catch(function(t){e.warn("getMultiplePicture:"+t)})})},t.prototype.convertImgToBase64=function(t,e,o){void 0===o&&(o="image/png");var n=document.createElement("CANVAS"),r=n.getContext("2d"),i=new Image;i.crossOrigin="Anonymous",i.onload=function(){n.height=i.height,n.width=i.width,r.drawImage(i,0,0);var t=n.toDataURL(o),s=t.substring(t.indexOf(";base64,")+8);e.call(this,s),n=null},i.src=t},t.prototype.getUserLocation=function(){var t=this;return new Promise(function(e){t.isMobile()?LocationPlugin.getLocation(function(t){e({lng:t.longitude,lat:t.latitude})},function(e){alert(-1==e.indexOf("缺少定位权限")?"错误消息："+e:"缺少定位权限，请在手机设置中开启"),t.warn("getUserLocation:"+e)}):(t.warn("getUserLocation:非手机环境,即测试环境返回固定坐标"),e({lng:113.350912,lat:23.119495}))})},t.prototype.getVersionNumber=function(){var t=this;return new Promise(function(e){t.appVersion.getVersionNumber().then(function(t){e(t)}).catch(function(e){t.warn("getVersionNumber:"+e)})})},t.prototype.getAppName=function(){var t=this;return new Promise(function(e){t.appVersion.getAppName().then(function(t){e(t)}).catch(function(e){t.warn("getAppName:"+e)})})},t.prototype.getPackageName=function(){var t=this;return new Promise(function(e){t.appVersion.getPackageName().then(function(t){e(t)}).catch(function(e){t.warn("getPackageName:"+e)})})},t.prototype.getNetworkType=function(){return this.isMobile()?this.network.type:"wifi"},t.prototype.isConnecting=function(){return"none"!=this.getNetworkType()},t.prototype.call=function(t){this.callNumber.callNumber(t,!0).then(function(){}).catch(function(){})},t.prototype.sendSms=function(t){this.callNumber.callNumber(t,!0).then(function(){}).catch(function(){})},t}();xt.decorators=[{type:e.Injectable}],xt.ctorParameters=function(){return[{type:u.Platform},{type:u.AlertController},{type:l.AppVersion},{type:f.Camera},{type:n.Transfer},{type:i.FileOpener},{type:s.InAppBrowser},{type:a.ImagePicker},{type:p.Network},{type:c.CallNumber},{type:u.LoadingController}]};var Ct=[{provide:I,useClass:_t},{provide:j,useClass:It},{provide:N,useClass:bt}],Ot=function(){return function(){}}();Ot.decorators=[{type:e.NgModule,args:[{providers:[Ct,It,l.AppVersion,i.FileOpener,n.Transfer,s.InAppBrowser,a.ImagePicker,p.Network,c.CallNumber,xt,f.Camera]}]}],Ot.ctorParameters=function(){return[]},/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
t.ExePlatformModule=ht,t.AuthService=S,t.ExePlatformConponentModule=ft,t.WindowsPlatformModule=L,t.WechatPlatformModule=Pt,t.NativePlatformModule=Ot,Object.defineProperty(t,"__esModule",{value:!0})});